<!DOCTYPE html>
<html>
<head>
	<title>Comparing Cars by Country</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
	<style>
    	text { 
			font-family: Arial; 
			font-size: 15px;
		}
		.axis path, .axis line {
			fill: none;
			stroke: black;
			shape-rendering: crispEdges;
		}
		.tick text {
			fill: black;
			font-size: 11px;
		}

		rect {
			stroke: white;
		}
	</style>
</head>

<body>

	<svg width="800" height="600">
		<g id="scatterplot" transform="translate(40,30)">
			<text>MPG of cars by model year</text>


		</g>

	</svg>

<script>
		var cars = [];
		//replace MPG next line with relevant variable for selection later



		function drawScatterPlot() 
		{
			var CHART_WIDTH = 250;
			var CHART_HEIGHT = 250;
			var MAX_BAR_HEIGHT = 100;
			
			var xScale = d3.scale.linear();
			var yScale = d3.scale.linear();
			
			var maxYear = d3.max(cars, function(d) { return +d.Model; });
			var minYear = d3.min(cars, function(d) { return +d.Model; });
			//replace all the MPG junk with something to change variable when we get to that
			var maxMPG = d3.max(cars, function(d) { return +d.MPG; });
			var minMPG = d3.min(cars, function(d) { return +d.MPG; });
			xScale
				.domain([minYear, maxYear])
				.range([0, CHART_WIDTH])
				.nice();
			
			yScale
				.domain([minMPG, maxMPG])
				.range([CHART_HEIGHT, 0]);

			
			
			var g = d3.select('svg').select('#scatterplot');


			// create axes
			var xAxis = d3.svg.axis()
				.scale(xScale)
				.orient('bottom').ticks(5);
				//.tickFormat(function(d) { return "" + d; })

			var yAxis = d3.svg.axis()
				.scale(yScale)
				.orient('left');


			g.append('text')
				.attr('y', CHART_HEIGHT + 30)
				.attr('x', CHART_WIDTH/2 - 50)
				.html('Model Year');
		
			g.append('text')
				.attr('y', 0)
				.attr('x', 0)
				.attr('transform', 'translate(-25,150),rotate(-90)')
				.html('Miles Per Gallon');


			g.append('g')
				.attr('class', 'axis')
				.attr('transform', 'translate(0,' + CHART_HEIGHT + ')')
				.call(xAxis);

			g.append('g')
				.attr('class', 'axis')
				.call(yAxis);
			// create circles for my data points
			var circles = g.selectAll('circle')
				.data(cars)
				.enter()
				.append('circle');

			circles
				.style('fill', 'steelblue')
				.attr('r', 5)
				.attr('cx', function (d) {
					var x = d.Model;
					return xScale(x)
				})
				.attr('cy', function (d) {
					var y = d.MPG;
					return yScale(y)
				});

		}
		
		d3.csv('cars.csv', function(data) 
		{
			cars = data;
			drawScatterPlot();
		});
</script>
</body>

</html>